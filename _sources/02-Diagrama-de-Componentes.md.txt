# Diagrama de Componentes

## Estrutura de Componentes do Sistema

Este documento descreve os componentes principais do sistema e suas interaÃ§Ãµes.

## Componentes do Frontend

### Mapa geral

```{mermaid}

graph TD

Frontend["ðŸ–¥ï¸ Frontend (React + TypeScript)"]
Backend["âš™ï¸ API Interna (Node.js + Express)"]
System["ðŸ’¾ Sistema Local (Delphi + Firebird)"]

Frontend --> Backend
Backend --> System

subgraph Frontend
direction TB
Public["ðŸŒ PÃ¡ginas PÃºblicas"]
Customer["ðŸ‘¤ Ãrea do Cliente"]
Admin["ðŸ§° Painel Administrativo"]
Shared["ðŸ§© Componentes Compartilhados"]
Services["ðŸ”„ ServiÃ§os & Estado"]
end


```

### Paginas PÃºblicas

```{mermaid}

graph TD
subgraph Public_Pages["ðŸŒ PÃ¡ginas PÃºblicas"]
direction TB
HomePage["ðŸ  Home Page"]
ProductPage["ðŸ›ï¸ PÃ¡gina de Produto"]
CategoryPage["ðŸ—‚ï¸ Categoria / ColeÃ§Ã£o"]
SearchPage["ðŸ” Resultados de Busca"]
CartPage["ðŸ›’ Carrinho de Compras"]
CheckoutPage["ðŸ’³ Checkout"]
LoginPage["ðŸ” Login / Registro"]
ContactPage["âœ‰ï¸ Contato / Suporte"]
end

HomePage --> ProductPage
ProductPage --> CartPage
CartPage --> CheckoutPage
LoginPage --> CheckoutPage

classDef page fill:#d0ebff,stroke:#333,stroke-width:0.5px;
class HomePage,ProductPage,CategoryPage,SearchPage,CartPage,CheckoutPage,LoginPage,ContactPage page;

```

### Ãrea do Cliente

```{mermaid}
graph TD
subgraph Customer_Area["ðŸ‘¤ Ãrea do Cliente"]
direction TB
AccountPage[ Minha Conta]
OrdersPage[ Meus Pedidos]
WishlistPage[ Lista de Desejos]
ProfileSettings
end

AccountPage --> OrdersPage
OrdersPage --> WishlistPage
ProfileSettings --> AccountPage
```

### Painel Administrativo

```{mermaid}
graph TD
subgraph Admin_Dashboard["ðŸ§° Painel Administrativo"]
direction TB
DashboardHome["ðŸ“Š VisÃ£o Geral"]
ProductManager["ðŸ“¦ Gerenciamento de Produtos"]
OrderManager["ðŸ§¾ Gerenciamento de Pedidos"]
UserManager["ðŸ‘¥ Gerenciamento de UsuÃ¡rios"]
ReportsPage["ðŸ“ˆ RelatÃ³rios e EstatÃ­sticas"]
SystemSettings["âš™ï¸ ConfiguraÃ§Ãµes do Sistema"]
end

DashboardHome --> ProductManager
DashboardHome --> OrderManager
DashboardHome --> UserManager
OrderManager --> ReportsPage
SystemSettings --> ReportsPage
```

### ServiÃ§os e Estado + Componentes Compartilhados
```{mermaid}
graph TD

subgraph Shared_Components["ðŸ§© Componentes Compartilhados"]
direction TB
Header["ðŸ” Header / NavegaÃ§Ã£o"]
Footer["ðŸ”» Footer"]
Sidebar["ðŸ“‘ Sidebar / Menu Lateral"]
ProductCard["ðŸ›’ Card de Produto"]
FilterBar["ðŸŽšï¸ Barra de Filtros"]
Pagination["ðŸ”¢ PaginaÃ§Ã£o"]
Modal["ðŸ’¬ Modal GenÃ©rico"]
Toasts["ðŸ”” NotificaÃ§Ãµes"]
Loader["â³ Carregamento"]
end

subgraph Services_State["ðŸ”„ ServiÃ§os & Estado"]
direction TB
ApiService["ðŸŒ ServiÃ§o de API"]
AuthService["ðŸ” AutenticaÃ§Ã£o"]
CartService["ðŸ›ï¸ Carrinho"]
PaymentService["ðŸ’³ Pagamento"]
AppContext["ðŸ§  Contexto da AplicaÃ§Ã£o"]
CartContext["ðŸ§º Contexto do Carrinho"]
AuthContext["ðŸ‘¤ Contexto de UsuÃ¡rio"]
end

Header --> ApiService
ProductCard --> CartService
CartService --> CartContext
AuthService --> AuthContext
ApiService --> AppContext

classDef service fill:#ffd43b,stroke:#333,stroke-width:0.5px;
classDef component fill:#e7f5ff,stroke:#333,stroke-width:0.5px;

class ApiService,AuthService,CartService,PaymentService service;
class Header,Footer,Sidebar,ProductCard,FilterBar,Pagination,Modal,Toasts,Loader component;

```

## Backend â€“ Node + Express + TypeScript


### VisÃ£o geral

```{mermaid}
graph TD

Frontend["ðŸ–¥ï¸ Frontend (React + TS)"]
Backend["âš™ï¸ API Interna (Node.js + Express)"]
ExternalAPI["ðŸŒ API Externa (Sistema da Loja)"]
Database["ðŸ’¾ Banco de Dados Local (Firebird)"]

Frontend --> Backend
Backend --> ExternalAPI
ExternalAPI --> Database

subgraph Backend
direction TB
Routing["ðŸ›£ï¸ Roteamento (Express)"]
Controllers["ðŸŽ¯ Controladores"]
Services["ðŸ§© ServiÃ§os"]
Middlewares["ðŸ§± Middlewares"]
Auth["ðŸ” AutenticaÃ§Ã£o JWT"]
end

style Backend fill:#ffd43b,stroke:#333,stroke-width:1px;
style ExternalAPI fill:#ff922b,stroke:#333,stroke-width:1px;
style Database fill:#74c0fc,stroke:#333,stroke-width:1px;
style Frontend fill:#61dafb,stroke:#333,stroke-width:1px;
```

### MÃ³dulo de Rotas e Middlewares

```{mermaid}
graph TD

subgraph Routing_Middleware["ðŸ›£ï¸ Roteamento & Middlewares"]
direction TB
Router["ðŸš Express Router"]
LoggerMW["ðŸ§¾ Logger Middleware"]
ErrorMW["âŒ Error Handler"]
AuthMW["ðŸ”’ Auth Middleware"]
ValidationMW["ðŸ§© Validation Middleware"]
CorsMW["ðŸŒ CORS Middleware"]
end

Router --> AuthMW
AuthMW --> ValidationMW
ValidationMW --> Controllers["ðŸŽ¯ Controladores"]
LoggerMW --> Router
ErrorMW --> Router
CorsMW --> Router
```

### AutenticaÃ§Ã£o e Controle de Acesso
```{mermaid}
graph TD

subgraph Auth_System["ðŸ” Sistema de AutenticaÃ§Ã£o"]
direction TB
JWTService["ðŸ”‘ JWT Service"]
UserModel["ðŸ‘¤ User Model"]
SessionManager["ðŸ’¼ Session Manager"]
PasswordHasher["ðŸ”’ Criptografia de Senhas"]
RoleGuard["ðŸ›¡ï¸ Controle de PermissÃµes"]
end

UserModel --> JWTService
JWTService --> SessionManager
SessionManager --> RoleGuard
PasswordHasher --> UserModel
```

### ServiÃ§os, Controladores e IntegraÃ§Ã£o Externa

```{mermaid}
graph TD

subgraph Services_Controllers["ðŸ§© ServiÃ§os e Controladores"]
direction TB
ProductController["ðŸŽ¯ Product Controller"]
OrderController["ðŸ§¾ Order Controller"]
UserController["ðŸ‘¥ User Controller"]
ReportController["ðŸ“ˆ Report Controller"]
end

subgraph Services["ðŸ”§ ServiÃ§os"]
direction TB
ProductService["ðŸ“¦ Product Service"]
OrderService["ðŸ’³ Order Service"]
UserService["ðŸ§ User Service"]
ReportService["ðŸ“Š Report Service"]
end

subgraph Integration["ðŸŒ IntegraÃ§Ã£o com API Externa"]
direction TB
ExternalAPI["ðŸ›°ï¸ API Externa da Loja"]
DataMapper["ðŸ”„ Conversor de Dados"]
CacheLayer["âš¡ Cache / Performance"]
end

ProductController --> ProductService
OrderController --> OrderService
UserController --> UserService
ReportController --> ReportService

ProductService --> ExternalAPI
OrderService --> ExternalAPI
ReportService --> CacheLayer
ExternalAPI --> DataMapper

classDef block fill:#fff3bf,stroke:#333,stroke-width:0.5px;
classDef external fill:#ffd8a8,stroke:#333,stroke-width:0.5px;

class ProductController,OrderController,UserController,ReportController block;
class ProductService,OrderService,UserService,ReportService block;
class ExternalAPI,DataMapper,CacheLayer external;
```
