
# Documenta√ß√£o da API de Produtos - Benedictus

Esta API fornece acesso aos dados de produtos do cat√°logo, permitindo listagem, filtragem por categoria, busca textual e pagina√ß√£o.

## üöÄ Vis√£o Geral

- **Base URL**: `http://localhost:3333` (Padr√£o de desenvolvimento)
- **Formato de Resposta**: JSON
- **Autentica√ß√£o**: Nenhuma (P√∫blica)

---

## üìä Fluxo de Dados

O diagrama abaixo ilustra como a API processa uma requisi√ß√£o de busca de produtos.

```{mermaid}
sequenceDiagram
    participant Cliente
    participant API
    participant SistemaArquivos as File System (JSON)

    Note over Cliente, API: Exemplo: GET /products?page=1&category=Velas

    Cliente->>API: Requisi√ß√£o HTTP GET
    activate API

    API->>SistemaArquivos: Ler produtos_atualizado.json
    activate SistemaArquivos
    SistemaArquivos-->>API: Retorna dados brutos
    deactivate SistemaArquivos

    API->>API: Normalizar dados

    alt Possui Filtros?
        API->>API: Filtrar por Categoria / Busca
    end

    API->>API: Calcular Pagina√ß√£o (skip/take)

    API-->>Cliente: Retorna JSON { data, meta }
    deactivate API
```

---

## üîó Endpoints

### 1. Listar Produtos
Retorna uma lista paginada de produtos.

**Rota:** `GET /products`

**Par√¢metros de Consulta (Query Params):**

| Par√¢metro  | Tipo     | Padr√£o | Descri√ß√£o |
|:-----------|:---------|:-------|:----------|
| `page`     | `number` | `1`    | N√∫mero da p√°gina atual. |
| `limit`    | `number` | `10`   | Quantidade de itens por p√°gina. |
| `category` | `string` | -      | Filtra produtos por categoria exata. |
| `search`   | `string` | -      | Busca textual no nome ou descri√ß√£o. |

**Exemplo de Requisi√ß√£o:**

```bash
GET /products?page=1&limit=5&category=Velas
```

**Exemplo de Resposta (200 OK):**
```json
{
  "data": [
    {
      "id": "prod_001",
      "nome": "Vela Arom√°tica Lavanda",
      "descricao": "Vela artesanal com aroma de lavanda...",
      "preco": 45.90,
      "categoria": "Velas",
      "imagem": "/images/vela-lavanda.jpg",
      "disponivel": true
    }
  ],
  "meta": {
    "page": 1,
    "limit": 5,
    "total": 1,
    "totalPages": 1
  }
}
```

---

### 2. Listar Categorias
Retorna todas as categorias √∫nicas dispon√≠veis no cat√°logo.

**Rota:** `GET /categories`

**Exemplo de Resposta (200 OK):**
```json
[
  "Velas",
  "Incensos",
  "Decora√ß√£o",
  "Acess√≥rios"
]
```

---

### 3. Health Check
Verifica se a API est√° online.

**Rota:** `GET /`

**Exemplo de Resposta (200 OK):**
```json
{
  "status": "ok",
  "timestamp": "2023-10-27T10:00:00.000Z"
}
```

---

## üß© Estrutura de Dados

Abaixo est√° a estrutura dos objetos retornados pela API.

```{mermaid}
classDiagram
    class RespostaAPI {
        +Produto[] data
        +MetaPagination meta
    }

    class Produto {
        +String id
        +String nome
        +String descricao
        +Number preco
        +String categoria
        +String imagem
        +Boolean disponivel
    }

    class MetaPagination {
        +Number page
        +Number limit
        +Number total
        +Number totalPages
    }

    RespostaAPI *-- Produto : contem lista
    RespostaAPI *-- MetaPagination : contem info
```

## üõ†Ô∏è Configura√ß√£o e Execu√ß√£o

Para rodar a API localmente:

1. Certifique-se de que o arquivo de dados existe em `src/data/produtos_atualizado.json`.
2. Instale as depend√™ncias:
   ```bash
   npm install
   ```
3. Inicie o servidor em modo de desenvolvimento:
   ```bash
   npm run dev
   ```


